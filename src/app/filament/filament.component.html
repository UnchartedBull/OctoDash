<table class="top-bar">
    <tr>
        <td class="top-bar__back" (click)="decreasePage()" matRipple [matRippleUnbounded]="false">
            <img src="assets/back.svg" class="top-bar__back-icon" />back
        </td>
        <td class="top-bar__center">
            <img src="assets/filament.svg" class="top-bar__center-icon" *ngIf="page === 0">
            <div class="filament__progress-bar-wrapper" *ngIf="page > 0">
                <div class="filament__progress-bar" id="progressBar"></div>
            </div>
        </td>
        <td class="top-bar__next" (click)="increasePage()" matRipple [matRippleUnbounded]="false">
            skip<img src="assets/next.svg" class="top-bar__next-icon">
        </td>
    </tr>
</table>
<div class="filament">
    <div *ngIf="page === 0">
        <span class="filament-heading">select your new filament</span>
        <table class="filament-filaments" *ngIf="filamentSpools && !isLoadingSpools">
            <tr *ngFor="let spool of filamentSpools.spools" (click)="setSpool(spool)">
                <td class="filament-filaments__type">
                    <span class="filament-filaments__type-box"
                        [ngStyle]="{'border-color': spool.color}">{{ spool.profile.material }}</span>
                </td>
                <td class="filament-filaments__name">
                    {{ spool.displayName }}
                </td>
                <td class="filament-filaments__weight-left">{{ getSpoolWeightLeft(spool.weight, spool.used) }}<span
                        style="font-size: 60%">g left</span></td>
            </tr>
        </table>
        <div class="filament-no-filaments" *ngIf="!filamentSpools && !isLoadingSpools">
            no filament spools found
        </div>
        <div class="filament-no-filaments" *ngIf="isLoadingSpools">
            loading spools ...
        </div>
        <div class="scroll__thumb-inactive" *ngIf="filamentSpools"></div>
    </div>
    <div *ngIf="page === 1">
        <span class="filament-heading">heating the nozzle</span>
        <div class="filament-heating__center">
            <div class="filament-heating__controller">
                <div class="filament-heating__controller-row">
                    <div class="filament-heating__controller-control" (click)="changeHotendTarget(1)" matRipple
                        [matRippleUnbounded]="false">+1
                    </div>
                    <div class="filament-heating__controller-control" (click)="changeHotendTarget(10)" matRipple
                        [matRippleUnbounded]="false">+10
                    </div>
                </div>
                <div class="filament-heating__controller-value" colspan="2">
                    {{ hotendTarget }}
                    <span class="filament-heating__controller-value-unit">°C</span>
                    <span class="filament-heating__controller-current" *ngIf="isHeating">/{{ hotendTemperature }}
                        <span>°C</span></span>
                </div>
                <div class="filament-heating__controller-row">
                    <div class="filament-heating__controller-control" (click)="changeHotendTarget(-1)" matRipple
                        [matRippleUnbounded]="false">-1
                    </div>
                    <div class="filament-heating__controller-control" (click)="changeHotendTarget(-10)" matRipple
                        [matRippleUnbounded]="false">-10
                    </div>
                </div>
            </div>
            <div class="filament-heating__information" *ngIf="selectedSpool">
                <div class="filament-heating__information-color" [ngStyle]="{'background-color': selectedSpool.color}">
                </div>
                <span class="filament-heating__information-name">{{ selectedSpool.profile.vendor }}</span>
                <div class="filament-heating__information-offset-wrapper">
                    <span class="filament-heating__information-offset-value">
                        {{ selectedSpool.temp_offset > 0 ? '+' : '-' }}{{ getAbsoluteValue(selectedSpool.temp_offset) }}
                    </span>
                    <span class="filament-heating__information-offset-indicator">°C</span>
                </div>
            </div>
        </div>
        <div class="filament-heating__start-wrapper" *ngIf="!isHeating">
            <span>wait <span>{{ automaticHeatingStartSeconds }}</span>s or - </span>
            <a class="filament-heating__start-heating" matRipple [matRippleUnbounded]="false"
                (click)="setNozzleTemperature()">start</a>
        </div>
    </div>
    <div *ngIf="page === 2">
        page 2
    </div>
    <div *ngIf="page === 3">
        page 3
    </div>
    <div *ngIf="page === 4">
        page 4
    </div>
    <div *ngIf="page === 5">
        page 5
    </div>
</div>
