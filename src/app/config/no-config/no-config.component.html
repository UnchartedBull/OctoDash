<div class="no-config">
    <table class="top-bar">
        <tr>
            <td class="top-bar__back" (click)="decreasePage()" *ngIf="page !== 0">
                <img src="assets/back.svg" class="top-bar__back-icon" />back
            </td>
            <td class="top-bar__back" *ngIf="page === 0"></td>
            <td class="top-bar__center">
                <div class="no-config__progress-bar-wrapper">
                    <div class="no-config__progress-bar" id="progressBar"></div>
                </div>
            </td>
            <td class="top-bar__next" (click)="increasePage()" *ngIf="page !== totalPages">
                next<img src="assets/next.svg" class="top-bar__next-icon" />
            </td>
            <td class="top-bar__next" *ngIf="page === totalPages"></td>
        </tr>
    </table>
    <div *ngIf="page === 0">
        <span class="no-config__1-welcome">Hey there!</span>
        <span class="no-config__text" *ngIf="!configUpdate">
            It looks like this is the first time starting OctoDash! <br>
            I'll help you setting up your config. If you encounter any issues please create an issue in
            GitHub. <br> <br>
            Thanks for choosing OctoDash :)
        </span>
        <span class="no-config__text" *ngIf="configUpdate">
            Sorry for bothering you again ... <br>
            We've released an update, so awesome, we needed to change the config. Please review your new config! <br>
            <br>
            Thanks for choosing OctoDash :)
        </span>
    </div>
    <div *ngIf="page === 1">
        <span class="no-config__text">
            First, tell me some facts about your printer and filament so I can personalize OctoDash.
        </span>
        <form class="no-config__form">
            <label for="printerName" class="no-config__input-label">Printer Name:</label>
            <input type="text" id="printerName" class="no-config__input" maxlength="13"
                [(ngModel)]="config.printer.name" name="printerName" required>

            <span class="no-config__2-filament-divider">Filament</span>
            <label for="filamentDiameter" class="no-config__input-label-small">Diameter:</label>
            <input type="number" id="filamentDiameter" class="no-config__input no-config__input-small"
                [(ngModel)]="config.filament.thickness" name="filamentDiameter" step="0.01" min="0" required>
            <span class="no-config__input-small-suffix" style="padding-right: 3vw;">mm</span>

            <label for="filamentDensity" class="no-config__input-label-small">Density:</label>
            <input type="number" id="filamentDensity" class="no-config__input no-config__input-small"
                [(ngModel)]="config.filament.density" name="filamentDensity" step="0.001" min="0" required>
            <span class="no-config__input-small-suffix">g/cmÂ³</span>
        </form>
    </div>
    <div *ngIf="page === 2">
        <span class="no-config__text">
            Now I need to know something about your OctoPrint setup, so I can talk to your printer.
        </span>
        <form class="no-config__form">
            <label for="octoprintURL" class="no-config__input-label">Octoprint URL:</label>
            <input type="text" id="octoprintURL" class="no-config__input" [(ngModel)]="this.config.octoprint.url"
                name="octoprintURL" required style="width: 52.5vw">

            <label for="accessToken" class="no-config__input-label">Access Token:</label>
            <input type="text" id="accessToken" class="no-config__input" [(ngModel)]="this.config.octoprint.accessToken"
                name="accessToken" required>
        </form>
    </div>
    <div *ngIf="page === 3">
        <span class="no-config__text">
            And finally some information on how OctoDash should be setup.
        </span>
        <form class="no-config__form">
            <div class="no-config__checkbox-container"
                (click)="config.octodash.touchscreen = !config.octodash.touchscreen">
                <span class="no-config__checkmark">
                    <span class="no-config__checkbox-checked" *ngIf="config.octodash.touchscreen"></span>
                </span> Touchscreen
            </div>
            <div class="no-config__3-temperature">
                <span *ngIf="config.octodash.temperatureSensor.type !== 0">Sensor:</span>
                <span *ngIf="config.octodash.temperatureSensor.type === 0">Temperature Sensor:</span>
                <span class="no-config__select-wrapper">
                    <select [(ngModel)]="config.octodash.temperatureSensor.type" name="temperatureSensorType">
                        <option [ngValue]="0">None</option>
                        <option [ngValue]="11">DHT11</option>
                        <option [ngValue]="22">DHT22</option>
                        <option [ngValue]="22">AM2302</option>
                    </select>
                </span>
                <span *ngIf="config.octodash.temperatureSensor.type !== 0">
                    <label for="filamentDensity" class="no-config__input-label-small">GPIO:</label>
                    <input type="number" id="filamentDensity"
                        class="no-config__gpio no-config__input no-config__input-small" name="filamentDensity" step="1"
                        min="0" [(ngModel)]="config.octodash.temperatureSensor.gpio" required>
                </span>
            </div>
        </form>
    </div>
    <div *ngIf="page === 4">
        <span class="no-config__text">
            Great! I'll check everything.
        </span>
        <div class="no-config__4-check-wrapper">
            <span class="no-config__4-check">
                <img src="assets/checkmark.svg" class="no-config__4-check-icon" *ngIf="configValid" />
                <img src="assets/error.svg" class="no-config__4-check-icon" *ngIf="configValid == false" />
                Config Validation
            </span>
            <span class="no-config__4-errors" *ngFor="let error of configErrors">{{ error }}</span>
            <div *ngIf="configValid">
                <span class="no-config__4-check">
                    <img src="assets/checkmark.svg" class="no-config__4-check-icon" *ngIf="octoprintConnection" />
                    <img src="assets/error.svg" class="no-config__4-check-icon" *ngIf="octoprintConnection == false" />
                    Octoprint Connection
                </span>
                <span class="no-config__4-errors" *ngIf="octoprintConnectionError">{{ octoprintConnectionError }}</span>
            </div>
            <div *ngIf="configValid && octoprintConnection">
                <span class="no-config__4-check">
                    <img src="assets/checkmark.svg" class="no-config__4-check-icon" *ngIf="!configSaved" />
                    <img src="assets/error.svg" class="no-config__4-check-icon" *ngIf="configSaved" />
                    Saving Config
                </span>
                <span class="no-config__4-errors" *ngIf="configSaved">{{ configSaved }}</span>
            </div>
            <span *ngIf="configValid && octoprintConnection && !configSaved" class="no-config__4-finish"
                (click)="finishWizard()">done
            </span>
        </div>
    </div>
</div>
